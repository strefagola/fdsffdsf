<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>StrefaGola (SG)</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<style>
:root {
--bg: #0d101a;
--card: #161b26;
--text: #e0e0e0;
--text-light: #a0a0a0;
--accent: #ff3b3b;
--border: #252b3a;
}
* {
margin: 0;
padding: 0;
box-sizing: border-box;
}
body {
font-family: 'Roboto', system-ui, sans-serif;
background: var(--bg);
color: var(--text);
line-height: 1.6;
}
.top-nav {
background: #0b0e15;
border-bottom: 2px solid var(--accent);
padding: 0;
position: sticky;
top: 0;
z-index: 1000;
}
.nav-container {
max-width: 1600px;
margin: 0 auto;
display: flex;
overflow-x: auto;
}
.nav-container::-webkit-scrollbar {
display: none;
}
.top-nav ul {
display: flex;
list-style: none;
padding: 0 10px;
}
.top-nav li {
margin: 0;
}
.logo-box {
display: flex;
align-items: center;
padding: 8px 16px;
background: var(--accent);
min-width: 140px;
}
.logo-box img {
height: 28px;
margin-right: 10px;
}
.logo-text {
color: white;
font-weight: 700;
font-size: 1.1rem;
white-space: nowrap;
}
.top-nav a {
color: var(--text);
text-decoration: none;
padding: 12px 14px;
font-weight: 600;
font-size: 0.9rem;
white-space: nowrap;
border-bottom: 2px solid transparent;
transition: all 0.2s;
}
.top-nav a:hover, .top-nav a.active {
color: white;
border-bottom: 2px solid var(--accent);
}
#main {
max-width: 1400px;
margin: 20px auto;
padding: 0 15px;
}
header img {
width: 100%;
height: 160px;
object-fit: cover;
border-radius: 6px;
margin-bottom: 20px;
}
.page {
display: none;
}
.page.active {
display: block;
}
.page h2, .liga-subpage h3 {
font-size: 1.7rem;
margin: 20px 0 15px;
color: white;
font-weight: 700;
padding-bottom: 8px;
border-bottom: 2px solid var(--accent);
}
.hero {
text-align: center;
margin-bottom: 25px;
}
.hero h1 {
font-size: 2.1rem;
margin-bottom: 10px;
color: white;
}
.hero p {
font-size: 1rem;
color: var(--text-light);
max-width: 600px;
margin: 0 auto;
}
.features-grid {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
gap: 16px;
margin: 20px 0;
}
.feature-card {
background: var(--card);
padding: 16px;
border-radius: 6px;
text-align: center;
border: 1px solid var(--border);
}
.feature-card h3 {
margin-bottom: 6px;
color: white;
font-size: 1.1rem;
}
.content-grid {
display: grid;
gap: 20px;
}
.content-item {
background: var(--card);
padding: 18px;
border-radius: 6px;
border: 1px solid var(--border);
position: relative;
}
.content-item h3 {
font-size: 1.4rem;
margin-bottom: 10px;
color: white;
font-weight: 600;
}
.content-item .article-content {
line-height: 1.6;
color: var(--text-light);
white-space: pre-wrap;
margin-bottom: 12px;
font-size: 0.95rem;
}
.content-item img {
max-width: 100%;
height: auto;
border-radius: 6px;
margin: 10px 0;
display: block;
}
.content-item iframe, .content-item video {
width: 100%;
height: 220px;
border-radius: 6px;
margin: 10px 0;
}
.edit-btn, .delete-btn {
background: var(--accent);
color: white;
border: none;
padding: 5px 10px;
border-radius: 4px;
font-weight: 600;
cursor: pointer;
font-size: 0.85rem;
margin-left: 8px;
}
.delete-btn {
background: #dc2626;
}
.ligi-nav {
display: flex;
flex-wrap: wrap;
gap: 8px;
margin: 15px 0 20px;
}
.liga-btn {
padding: 7px 14px;
background: #1f2636;
border: 1px solid var(--border);
border-radius: 4px;
color: var(--text);
font-weight: 600;
font-size: 0.9rem;
cursor: pointer;
white-space: nowrap;
}
.liga-btn:hover {
background: #2a3245;
}
.liga-subpage {
display: none;
}
.liga-subpage.active-liga {
display: block;
}
.table-list {
width: 100%;
border-collapse: collapse;
margin-bottom: 20px;
background: var(--card);
border-radius: 6px;
overflow: hidden;
}
.table-list th,
.table-list td {
padding: 10px 12px;
text-align: center;
border-bottom: 1px solid var(--border);
}
.table-list th {
background: #0b0e15;
font-weight: 600;
}
.table-list tr:last-child td {
border-bottom: none;
}
.team-cell {
display: flex;
align-items: center;
gap: 8px;
justify-content: center;
}
.team-logo-small {
width: 20px;
height: 20px;
border-radius: 50%;
object-fit: cover;
}
.match-list {
display: grid;
gap: 6px;
}
.match-header {
background: #0b0e15;
padding: 8px 12px;
border-top-left-radius: 6px;
border-top-right-radius: 6px;
font-weight: 600;
font-size: 0.9rem;
display: flex;
justify-content: space-between;
align-items: center;
}
.match-row {
display: grid;
grid-template-columns: 1fr 1fr 1fr 1fr;
gap: 8px;
padding: 10px 12px;
border: 1px solid var(--border);
align-items: center;
position: relative;
}
.match-date {
font-size: 0.85rem;
color: var(--text-light);
}
.team-name {
display: flex;
align-items: center;
gap: 8px;
font-size: 0.9rem;
}
.team-logo {
width: 24px;
height: 24px;
border-radius: 50%;
object-fit: cover;
}
.score {
font-weight: 700;
font-size: 1rem;
text-align: center;
}
.admin-bar {
background: #090c12;
padding: 18px 15px;
margin-top: 30px;
border-top: 1px solid var(--border);
}
.admin-bar h3 {
margin-bottom: 10px;
color: var(--accent);
font-size: 1.1rem;
}
#adminPass {
width: 100%;
max-width: 280px;
padding: 9px;
margin: 6px 0 10px;
border: 1px solid var(--border);
border-radius: 4px;
background: #1a1f2c;
color: white;
font-size: 0.95rem;
}
.btn {
padding: 9px 14px;
border: none;
border-radius: 4px;
font-weight: 600;
cursor: pointer;
font-size: 0.95rem;
}
.btn-primary { background: var(--accent); color: white; }
.btn-danger { background: #d32f2f; color: white; }
.error {
color: #ff6b6b;
font-size: 0.8rem;
margin-top: 5px;
}
.modal {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: rgba(0,0,0,0.85);
display: flex;
justify-content: center;
align-items: center;
z-index: 2000;
}
.modal-content {
background: var(--card);
width: 92%;
max-width: 600px;
border-radius: 10px;
overflow: hidden;
border: 1px solid var(--border);
}
.modal-header {
padding: 12px 16px;
background: var(--accent);
color: white;
display: flex;
justify-content: space-between;
align-items: center;
}
.close-btn {
background: none;
border: none;
color: white;
font-size: 1.4rem;
cursor: pointer;
width: 30px;
height: 30px;
border-radius: 50%;
}
.modal-body {
padding: 18px;
}
.modal-body input,
.modal-body textarea,
.modal-body select {
width: 100%;
padding: 9px;
margin: 9px 0;
border: 1px solid var(--border);
border-radius: 4px;
background: #1a1f2c;
color: white;
font-size: 0.95rem;
}
textarea {
min-height: 120px;
resize: vertical;
}
.modal-actions {
display: flex;
gap: 10px;
margin-top: 14px;
}
.hidden { display: none !important; }
footer {
color: var(--text-light);
text-align: center;
padding: 18px 0;
margin-top: 25px;
font-size: 0.85rem;
}
.table-list tr.promotion { background: #1a5e1a; }
.table-list tr.playoff { background: #1a4a5e; }
.table-list tr.relegation { background: #5e1a1a; }
.legend {
display: flex;
flex-wrap: wrap;
gap: 12px;
margin-top: 8px;
font-size: 0.85rem;
color: var(--text-light);
}
.legend span {
width: 16px;
height: 16px;
border-radius: 4px;
display: inline-block;
}
.legend .promotion { background: #1a5e1a; }
.legend .playoff { background: #1a4a5e; }
.legend .relegation { background: #5e1a1a; }
@media (max-width: 768px) {
.hero h1 { font-size: 1.8rem; }
.page h2, .liga-subpage h3 { font-size: 1.5rem; }
.content-item h3 { font-size: 1.3rem; }
.liga-btn { padding: 6px 12px; font-size: 0.85rem; }
.edit-btn, .delete-btn { padding: 4px 8px; font-size: 0.8rem; margin-left: 4px; }
.top-nav a { padding: 10px 12px; font-size: 0.85rem; }
.match-row {
grid-template-columns: auto 1fr auto;
gap: 8px;
}
.team-name { font-size: 0.85rem; }
.score { font-size: 0.9rem; }
.table-list { font-size: 0.85rem; }
.team-cell { gap: 6px; }
.team-logo-small { width: 18px; height: 18px; }
}
</style>
</head>
<body>
<nav class="top-nav">
<div class="nav-container">
<div class="logo-box">
<img src="logo.png" alt="StrefaGola" onerror="this.style.display='none'" />
<span class="logo-text">StrefaGola</span>
</div>
<ul>
<li><a href="#" data-section="home" class="active">Strona główna</a></li>
<li><a href="#" data-section="news">Aktualności</a></li>
<li><a href="#" data-section="results">Wyniki</a></li>
<li><a href="#" data-section="analysis">Analizy</a></li>
<li><a href="#" data-section="media">Multimedia</a></li>
<li><a href="#" data-section="history">Transfery</a></li>
<li><a href="#" data-section="schedule">Terminarz</a></li>
<li><a href="#" data-section="polskie">Polskie ligi</a></li>
<li><a href="#" data-section="puchary">Puchary</a></li>
<li><a href="#" data-section="champions_league">Liga Mistrzów</a></li>
<li><a href="#" data-section="europa_league">Liga Europy</a></li>
<li><a href="#" data-section="conference_league">Liga Konferencji</a></li>
</ul>
</div>
</nav>
<main id="main">
<header>
<img src="https://www.ebilet.pl/now/app/uploads/2024/02/shutterstock_2253076431-1-1280x720.jpg" alt="Piłka nożna" />
</header>

<!-- MODAL BATCH -->
<div id="modalBatch" class="modal hidden">
<div class="modal-content">
<div class="modal-header">
<h2>Szybkie dodanie meczów</h2>
<button class="close-btn" onclick="closeModalBatch()">&times;</button>
</div>
<div class="modal-body">
<select id="batchSection">
<option value="ekstraklasa">Ekstraklasa (mecz)</option>
<option value="pierwsza_liga">1. liga (mecz)</option>
<option value="druga_liga">2. liga (mecz)</option>
<option value="trzecia_liga_gr1">3. liga gr I (mecz)</option>
<option value="trzecia_liga_gr2">3. liga gr II (mecz)</option>
<option value="trzecia_liga_gr3">3. liga gr III (mecz)</option>
<option value="trzecia_liga_gr4">3. liga gr IV (mecz)</option>
<option value="superpuchar">Superpuchar (mecz)</option>
<option value="puchar_polski">STS Puchar Polski (mecz)</option>
<option value="champions_league">Liga Mistrzów (mecz)</option>
<option value="europa_league">Liga Europy (mecz)</option>
<option value="conference_league">Liga Konferencji (mecz)</option>
</select>
<input type="text" id="batchRound" placeholder="Nazwa kolejki (np. Kolejka 3)" />
<textarea id="batchMatches" placeholder="Wklej mecze, każdy w osobnej linii, np.&#10;01.08.2025, 19:00 Polonia Środa Wlkp. 4-2 Błękitni Stargard&#10;02.08.2025, 15:00 Noteć Czarnków 1-1 Flota Świnoujście" style="height:160px;"></textarea>
<div class="modal-actions">
<button class="btn btn-primary" onclick="saveBatchMatches()">Dodaj mecze</button>
<button class="btn btn-danger" onclick="closeModalBatch()">Anuluj</button>
</div>
<p id="batchErr" class="error"></p>
</div>
</div>
</div>

<!-- MODAL STANDARDOWY -->
<div id="modal" class="modal hidden">
<div class="modal-content">
<div class="modal-header">
<h2 id="modalTitle">Dodaj treść</h2>
<button class="close-btn" onclick="closeModal()">&times;</button>
</div>
<div class="modal-body">
<select id="modalSection">
<!-- Artykuły -->
<option value="news">Aktualności</option>
<option value="results">Wyniki</option>
<option value="analysis">Analizy</option>
<option value="media">Multimedia</option>
<option value="history">Transfery</option>
<option value="schedule">Terminarz</option>
<!-- Polskie ligi – mecze -->
<option value="ekstraklasa">Ekstraklasa (mecz)</option>
<option value="pierwsza_liga">1. liga (mecz)</option>
<option value="druga_liga">2. liga (mecz)</option>
<option value="trzecia_liga_gr1">3. liga gr I (mecz)</option>
<option value="trzecia_liga_gr2">3. liga gr II (mecz)</option>
<option value="trzecia_liga_gr3">3. liga gr III (mecz)</option>
<option value="trzecia_liga_gr4">3. liga gr IV (mecz)</option>
<!-- Puchary – mecze -->
<option value="superpuchar">Superpuchar (mecz)</option>
<option value="puchar_polski">STS Puchar Polski (mecz)</option>
<!-- Europa – mecze -->
<option value="champions_league">Liga Mistrzów (mecz)</option>
<option value="europa_league">Liga Europy (mecz)</option>
<option value="conference_league">Liga Konferencji (mecz)</option>
<!-- Tabele -->
<option value="ekstraklasa_table">Ekstraklasa (tabela)</option>
<option value="pierwsza_liga_table">1. liga (tabela)</option>
<option value="druga_liga_table">2. liga (tabela)</option>
<option value="trzecia_liga_gr1_table">3. liga gr I (tabela)</option>
<option value="trzecia_liga_gr2_table">3. liga gr II (tabela)</option>
<option value="trzecia_liga_gr3_table">3. liga gr III (tabela)</option>
<option value="trzecia_liga_gr4_table">3. liga gr IV (tabela)</option>
<option value="superpuchar_table">Superpuchar (tabela)</option>
<option value="puchar_polski_table">STS Puchar Polski (tabela)</option>
<option value="champions_league_table">Liga Mistrzów (tabela)</option>
<option value="europa_league_table">Liga Europy (tabela)</option>
<option value="conference_league_table">Liga Konferencji (tabela)</option>
</select>
<div id="articleFields">
<input type="text" id="modalTitleInput" placeholder="Tytuł artykułu" />
<textarea id="modalContent" placeholder="Treść..."></textarea>
<input type="url" id="modalImage" placeholder="Link do zdjęcia" />
<input type="url" id="modalVideo" placeholder="Link do filmu" />
</div>
<div id="matchFields" style="display:none;">
<input type="text" id="modalTitleInputMatch" placeholder="KOLEJKA 20" />
<div style="margin:10px 0;padding:10px;background:#1a1f2c;border-radius:6px;">
<label>Gospodarz</label>
<input type="text" id="modalHomeTeam" placeholder="Drużyna" style="width:100%;margin:5px 0;" />
<input type="url" id="modalLogoHome" placeholder="URL herbu" style="width:100%;" />
</div>
<div style="margin:10px 0;padding:10px;background:#1a1f2c;border-radius:6px;">
<label>Gość</label>
<input type="text" id="modalAwayTeam" placeholder="Drużyna" style="width:100%;margin:5px 0;" />
<input type="url" id="modalLogoAway" placeholder="URL herbu" style="width:100%;" />
</div>
<input type="text" id="modalDate" placeholder="Data i godzina" />
<input type="text" id="modalScore" placeholder="Wynik (np. 2:1)" />
</div>
<div id="tableFields" style="display:none;">
<input type="number" id="modalPosition" placeholder="Pozycja (1-20)" min="1" max="100" />
<input type="text" id="modalTeamName" placeholder="Nazwa drużyny" />
<input type="url" id="modalTeamLogo" placeholder="URL herbu drużyny" />
<input type="text" id="modalMatches" placeholder="Mecze (np. WWPPW)" />
<input type="number" id="modalPoints" placeholder="Liczba punktów" min="0" />
</div>
<div class="modal-actions">
<button class="btn btn-primary" id="modalSaveBtn" onclick="handleSave()">Zapisz</button>
<button class="btn btn-danger" id="modalDelBtn" onclick="deleteContent()" style="display:none;">Usuń</button>
</div>
<p id="modalErr" class="error"></p>
</div>
</div>
</div>

<!-- SEKCJE -->
<section id="home" class="page active">
<div class="hero">
<h1>Witaj w StrefieGola</h1>
<p>Najnowsze informacje piłkarskie – wyniki, analizy, multimedia i transfery.</p>
</div>
<div class="features-grid">
<div class="feature-card"><h3>Polskie ligi</h3><p>Ekstraklasa i niższe szczeble na bieżąco.</p></div>
<div class="feature-card"><h3>Liga Mistrzów</h3><p>Najważniejsze mecze Europy.</p></div>
<div class="feature-card"><h3>Puchary</h3><p>Superpuchar i Puchar Polski.</p></div>
</div>
</section>
<section id="news" class="page"><h2>Aktualności</h2><div id="news-list" class="content-grid">Ładowanie...</div></section>
<section id="results" class="page"><h2>Wyniki</h2><div id="results-list" class="content-grid">Ładowanie...</div></section>
<section id="analysis" class="page"><h2>Analizy</h2><div id="analysis-list" class="content-grid">Ładowanie...</div></section>
<section id="media" class="page"><h2>Multimedia</h2><div id="media-list" class="content-grid">Ładowanie...</div></section>
<section id="history" class="page"><h2>Transfery</h2><div id="history-list" class="content-grid">Ładowanie...</div></section>
<section id="schedule" class="page"><h2>Terminarz</h2><div id="schedule-list" class="content-grid">Ładowanie...</div></section>
<section id="polskie" class="page">
<h2>Polskie ligi</h2>
<div class="ligi-nav">
<button class="liga-btn" onclick="showLiga('polskie', 'ekstraklasa')">Ekstraklasa</button>
<button class="liga-btn" onclick="showLiga('polskie', 'pierwsza_liga')">1. liga</button>
<button class="liga-btn" onclick="showLiga('polskie', 'druga_liga')">2. liga</button>
<button class="liga-btn" onclick="showLiga('polskie', 'trzecia_liga_gr1')">3. liga gr I</button>
<button class="liga-btn" onclick="showLiga('polskie', 'trzecia_liga_gr2')">3. liga gr II</button>
<button class="liga-btn" onclick="showLiga('polskie', 'trzecia_liga_gr3')">3. liga gr III</button>
<button class="liga-btn" onclick="showLiga('polskie', 'trzecia_liga_gr4')">3. liga gr IV</button>
</div>
<div id="ekstraklasa-content" class="liga-subpage active-liga">
<h3>Tabela Ekstraklasy</h3>
<table id="ekstraklasa_table-list" class="table-list">
<thead><tr><th>#</th><th>Drużyna</th><th>Mecze</th><th>Punkty</th></tr></thead>
<tbody><tr><td colspan="4">Ładowanie...</td></tr></tbody>
</table>
<h3>Mecze Ekstraklasy</h3>
<div id="ekstraklasa-list" class="match-list">Ładowanie...</div>
</div>
<div id="pierwsza_liga-content" class="liga-subpage">
<h3>Tabela 1. ligi</h3>
<table id="pierwsza_liga_table-list" class="table-list">
<thead><tr><th>#</th><th>Drużyna</th><th>Mecze</th><th>Punkty</th></tr></thead>
<tbody><tr><td colspan="4">Ładowanie...</td></tr></tbody>
</table>
<h3>Mecze 1. ligi</h3>
<div id="pierwsza_liga-list" class="match-list">Ładowanie...</div>
</div>
<div id="druga_liga-content" class="liga-subpage">
<h3>Tabela 2. ligi</h3>
<table id="druga_liga_table-list" class="table-list">
<thead><tr><th>#</th><th>Drużyna</th><th>Mecze</th><th>Punkty</th></tr></thead>
<tbody><tr><td colspan="4">Ładowanie...</td></tr></tbody>
</table>
<h3>Mecze 2. ligi</h3>
<div id="druga_liga-list" class="match-list">Ładowanie...</div>
</div>
<div id="trzecia_liga_gr1-content" class="liga-subpage">
<h3>Tabela 3. ligi gr I</h3>
<table id="trzecia_liga_gr1_table-list" class="table-list">
<thead><tr><th>#</th><th>Drużyna</th><th>Mecze</th><th>Punkty</th></tr></thead>
<tbody><tr><td colspan="4">Ładowanie...</td></tr></tbody>
</table>
<h3>Mecze 3. ligi gr I</h3>
<div id="trzecia_liga_gr1-list" class="match-list">Ładowanie...</div>
</div>
<div id="trzecia_liga_gr2-content" class="liga-subpage">
<h3>Tabela 3. ligi gr II</h3>
<table id="trzecia_liga_gr2_table-list" class="table-list">
<thead><tr><th>#</th><th>Drużyna</th><th>Mecze</th><th>Punkty</th></tr></thead>
<tbody><tr><td colspan="4">Ładowanie...</td></tr></tbody>
</table>
<h3>Mecze 3. ligi gr II</h3>
<div id="trzecia_liga_gr2-list" class="match-list">Ładowanie...</div>
</div>
<div id="trzecia_liga_gr3-content" class="liga-subpage">
<h3>Tabela 3. ligi gr III</h3>
<table id="trzecia_liga_gr3_table-list" class="table-list">
<thead><tr><th>#</th><th>Drużyna</th><th>Mecze</th><th>Punkty</th></tr></thead>
<tbody><tr><td colspan="4">Ładowanie...</td></tr></tbody>
</table>
<h3>Mecze 3. ligi gr III</h3>
<div id="trzecia_liga_gr3-list" class="match-list">Ładowanie...</div>
</div>
<div id="trzecia_liga_gr4-content" class="liga-subpage">
<h3>Tabela 3. ligi gr IV</h3>
<table id="trzecia_liga_gr4_table-list" class="table-list">
<thead><tr><th>#</th><th>Drużyna</th><th>Mecze</th><th>Punkty</th></tr></thead>
<tbody><tr><td colspan="4">Ładowanie...</td></tr></tbody>
</table>
<h3>Mecze 3. ligi gr IV</h3>
<div id="trzecia_liga_gr4-list" class="match-list">Ładowanie...</div>
</div>
</section>
<section id="puchary" class="page">
<h2>Puchary</h2>
<div class="ligi-nav">
<button class="liga-btn" onclick="showLiga('puchary', 'superpuchar')">Superpuchar</button>
<button class="liga-btn" onclick="showLiga('puchary', 'puchar_polski')">STS Puchar Polski</button>
</div>
<div id="superpuchar-content" class="liga-subpage active-liga">
<h3>Mecze Superpucharu</h3>
<div id="superpuchar-list" class="match-list">Ładowanie...</div>
</div>
<div id="puchar_polski-content" class="liga-subpage">
<h3>Mecze Pucharu Polski</h3>
<div id="puchar_polski-list" class="match-list">Ładowanie...</div>
</div>
</section>
<section id="champions_league" class="page">
<h3>Tabela Ligi Mistrzów</h3>
<table id="champions_league_table-list" class="table-list">
<thead><tr><th>#</th><th>Drużyna</th><th>Mecze</th><th>Punkty</th></tr></thead>
<tbody><tr><td colspan="4">Ładowanie...</td></tr></tbody>
</table>
<h3>Mecze Ligi Mistrzów</h3>
<div id="champions_league-list" class="match-list">Ładowanie...</div>
</section>
<section id="europa_league" class="page">
<h3>Tabela Ligi Europy</h3>
<table id="europa_league_table-list" class="table-list">
<thead><tr><th>#</th><th>Drużyna</th><th>Mecze</th><th>Punkty</th></tr></thead>
<tbody><tr><td colspan="4">Ładowanie...</td></tr></tbody>
</table>
<h3>Mecze Ligi Europy</h3>
<div id="europa_league-list" class="match-list">Ładowanie...</div>
</section>
<section id="conference_league" class="page">
<h3>Tabela Ligi Konferencji</h3>
<table id="conference_league_table-list" class="table-list">
<thead><tr><th>#</th><th>Drużyna</th><th>Mecze</th><th>Punkty</th></tr></thead>
<tbody><tr><td colspan="4">Ładowanie...</td></tr></tbody>
</table>
<h3>Mecze Ligi Konferencji</h3>
<div id="conference_league-list" class="match-list">Ładowanie...</div>
</section>

<!-- PANEL ADMINA -->
<div class="admin-bar" id="adminPanel">
<h3>Panel administratora</h3>
<div id="loginForm">
<input type="password" id="adminPass" placeholder="Hasło" />
<button class="btn btn-primary" onclick="loginAdmin()">Zaloguj</button>
<p id="loginErr" class="error"></p>
</div>
<div id="adminTools" class="hidden">
<button class="btn btn-primary" onclick="openAddForm('news')">+ Artykuł</button>
<button class="btn btn-primary" onclick="openAddMatchOrTable('match')">+ Mecz</button>
<button class="btn btn-primary" onclick="openAddMatchOrTable('table')">+ Tabela</button>
<button class="btn btn-primary" onclick="openBatchModal()">+ Szybki mecz (batch)</button>
<button class="btn btn-danger" onclick="logoutAdmin()" style="margin-left:10px;">Wyloguj</button>
</div>
</div>
</main>
<footer>
<p>© 2025 StrefaGola (SG) • strefa@gola.hub.pl</p>
</footer>
<script src="firebase-config.js"></script>
<script>
// === REFERENCJE FIREBASE ===
const db = firebase.firestore();
const auth = firebase.auth();

// === MAPA HERBÓW ===
const teamLogoMap = {
"Wisła Płock": "https://pliki.meczyki.pl/live-score/soccer/participant/1651/25w.webp",
"Górnik Zabrze": "https://pliki.meczyki.pl/live-score/soccer/participant/1655/25w.webp",
"Jagiellonia Białystok": "https://pliki.meczyki.pl/live-score/soccer/participant/1670/25w.webp",
"Raków Częstochowa": "https://ssl.gstatic.com/onebox/media/sports/logos/a18HirV6C9lpSPTTPMXMgg_48x48.png",
"Zagłębie Lubin": "https://ssl.gstatic.com/onebox/media/sports/logos/pa_6HLH5Uws7grfp6G4LhA_48x48.png",
"Cracovia": "https://ssl.gstatic.com/onebox/media/sports/logos/6-v3o-SzN373qD9NRYJBlg_48x48.png",
"Radomiak Radom": "https://ssl.gstatic.com/onebox/media/sports/logos/AI6Eq4wdLltCnddNckuJ5Q_48x48.png",
"Lech Poznań": "https://ssl.gstatic.com/onebox/media/sports/logos/llb7BEhclH9k0ioe8rTU_Q_48x48.png",
"Korona Kielce": "https://ssl.gstatic.com/onebox/media/sports/logos/BDdCENWYiX0-i_9DT9hauQ_48x48.png",
"Pogoń Szczecin": "https://ssl.gstatic.com/onebox/media/sports/logos/WUDgte53yMralab_toMeRA_48x48.png",
"Motor Lublin": "https://ssl.gstatic.com/onebox/media/sports/logos/nAwgzBjlAZOToe5i9bdz0A_48x48.png",
"Arka Gdynia": "https://ssl.gstatic.com/onebox/media/sports/logos/Tv9vuFCLDcFMH8nqEA8RAQ_48x48.png",
"Lechia Gdańsk": "https://ssl.gstatic.com/onebox/media/sports/logos/LxSWFAHbCtEPUdJ8z_lG-g_48x48.png",
"Piast Gliwice": "https://ssl.gstatic.com/onebox/media/sports/logos/ZARHj_kWktwGFA39drl-XA_48x48.png",
"Widzew Łódź": "https://ssl.gstatic.com/onebox/media/sports/logos/rDwEAZ7syOg0mh3TKn-O5w_48x48.png",
"GKS Katowice": "https://ssl.gstatic.com/onebox/media/sports/logos/gQPXBkbKP9dyeO0fZQk8Rw_48x48.png",
"Legia Warszawa": "https://ssl.gstatic.com/onebox/media/sports/logos/tK6soR0WoxrQ7h7RsrWBLA_48x48.png",
"Bruk-Bet Termalica Nieciecza": "https://ssl.gstatic.com/onebox/media/sports/logos/o7XlkdQ8SdLztOfNbx_qOg_48x48.png",
"Wisła Kraków": "https://ssl.gstatic.com/onebox/media/sports/logos/3F6yvApKHQn0q0rZ0a2neA_48x48.png",
"Polonia Bytom": "https://tmssl.akamaized.net/images/wappen/head/7976.png?lm=1644567890",
"Pogoń Grodzisk Mazowiecki": "https://tmssl.akamaized.net/images/wappen/head/30998.png",
"Chrobry Głogów": "https://tmssl.akamaized.net/images/wappen/head/8377.png",
"Stal Rzeszów": "https://tmssl.akamaized.net/images/wappen/head/9510.png",
"Wieczysta Kraków": "https://tmssl.akamaized.net/images/wappen/head/30974.png",
"Śląsk Wrocław": "https://ssl.gstatic.com/onebox/media/sports/logos/3MmX1HdOQpyMjOyUYZrV5A_48x48.png",
"Ruch Chorzów": "https://ssl.gstatic.com/onebox/media/sports/logos/i1SqD6VNfcEk9HKF2T-d2w_48x48.png",
"Polonia Warszawa": "https://tmssl.akamaized.net/images/wappen/head/2745.png",
"Miedź Legnica": "https://ssl.gstatic.com/onebox/media/sports/logos/fq1WD9d3xLj74lIdent4DA_48x48.png",
"ŁKS Łódź": "https://ssl.gstatic.com/onebox/media/sports/logos/gI6Z_B5Q8Jg2O8o-cw4CXA_48x48.png",
"Pogoń Siedlce": "https://tmssl.akamaized.net/images/wappen/head/4896.png",
"Odra Opole": "https://tmssl.akamaized.net/images/wappen/head/5699.png",
"Puszcza Niepołomice": "https://ssl.gstatic.com/onebox/media/sports/logos/0YoWjF5XBl-2s1S6GWkH2A_48x48.png",
"Znicz Pruszków": "https://tmssl.akamaized.net/images/wappen/head/9109.png",
"GKS Tychy": "https://ssl.gstatic.com/onebox/media/sports/logos/-Go6VcuWu0XVD1P9u0hpCw_48x48.png",
"Stal Mielec": "https://ssl.gstatic.com/onebox/media/sports/logos/GF_H0JiHkv4o2d7_BKx9mw_48x48.png",
"Górnik Łęczna": "https://ssl.gstatic.com/onebox/media/sports/logos/0r_STnYWNI7W9ovslr9lbg_48x48.png",
"Unia Skierniewice": "https://tmssl.akamaized.net/images/wappen/head/30753.png",
"Warta Poznań": "https://ssl.gstatic.com/onebox/media/sports/logos/7hBYIuozHBS7YTUqURuTPg_48x48.png",
"Podhale Nowy Targ": "https://tmssl.akamaized.net/images/wappen/head/50162.png",
"Olimpia Grudziądz": "https://tmssl.akamaized.net/images/wappen/head/26564.png",
"Świt Szczecin": "https://tmssl.akamaized.net/images/wappen/head/50309.png",
"Stal Stalowa Wola": "https://tmssl.akamaized.net/images/wappen/head/8641.png",
"Resovia Rzeszów": "https://ssl.gstatic.com/onebox/media/sports/logos/7azjZdhixac1J0lTYKLTUw_48x48.png",
"Podbeskidzie Bielsko-Biała": "https://static.flashscore.com/res/image/data/QH3r5KVH-r18qDdb5.png",
"Śląsk Wrocław II": "https://static.flashscore.com/res/image/data/nBJb4VmC-EsEJ4Qb5.png",
"Sokół Kleczew": "https://tmssl.akamaized.net/images/wappen/head/10367.png",
"Chojniczanka Chojnice": "https://ssl.gstatic.com/onebox/media/sports/logos/_R1vMea3FWPzAtG3jDw_48x48.png",
"Sandecja Nowy Sącz": "https://ssl.gstatic.com/onebox/media/sports/logos/6vDKj5KjO7SCR1Y6Q4Nc-A_48x48.png",
"Zagłębie Sosnowiec": "https://ssl.gstatic.com/onebox/media/sports/logos/sosnowiec2425h_tm.png",
"Hutnik Kraków": "https://tmssl.akamaized.net/images/wappen/head/530.png",
"Rekord Bielsko-Biała": "https://tmssl.akamaized.net/images/wappen/head/31568.png",
"KKS 1925 Kalisz": "https://ssl.gstatic.com/onebox/media/sports/logos/-J5kYq1lpvSunxuL1zrK6A_48x48.png",
"ŁKS Łódź II": "https://tmssl.akamaized.net/images/wappen/head/16402.png",
"GKS Jastrzębie": "https://tmssl.akamaized.net/images/wappen/head/9104.png",
"Legia II Warszawa": "https://ssl.gstatic.com/onebox/media/sports/logos/9J1CLuM0AKoM0eeQxGamma_48x48.png",
"Warta Sieradz": "https://ssl.gstatic.com/onebox/media/sports/logos/SyRnJ_2N7ugjEwuPmHdp_g_48x48.png",
"ŁKS Łomża": "https://ssl.gstatic.com/onebox/media/sports/logos/_0KqFVi3vh_HmBq9Y3kP7w_48x48.png",
"Ząbkovia Ząbki": "https://ssl.gstatic.com/onebox/media/sports/logos/R4kPZ0Zzxj3OztUe9GqsKQ_48x48.png",
"Wigry Suwałki": "https://ssl.gstatic.com/onebox/media/sports/logos/0_qm3f8tVqS8Oa0tYCK6Cw_48x48.png",
"Wisła II Płock": "https://ssl.gstatic.com/onebox/media/sports/logos/8IsqZ9y2XHXp0sPXQ89WgQ_48x48.png",
"Świt Nowy Dwór Mazowiecki": "https://ssl.gstatic.com/onebox/media/sports/logos/O8j3W8gFS6e9R_3PnMS0yQ_48x48.png",
"Broń Radom": "https://ssl.gstatic.com/onebox/media/sports/logos/f7D7RKdqY6o9yV4BHO7bOg_48x48.png",
"KS CK Troszyn": "https://ssl.gstatic.com/onebox/media/sports/logos/M2qJx4qX5u1S5fVLpS5SEw_48x48.png",
"Lechia Tomaszów Mazowiecki": "https://ssl.gstatic.com/onebox/media/sports/logos/SSu5b0o3NlX1s9xC9WwPnA_48x48.png",
"Olimpia Elbląg": "https://ssl.gstatic.com/onebox/media/sports/logos/S_j9Xl3FgLm9S8QfHfBBGw_48x48.png",
"Widzew II Łódź": "https://ssl.gstatic.com/onebox/media/sports/logos/rDwEAZ7syOg0mh3TKn-O5w_48x48.png",
"Jagiellonia II Białystok": "https://ssl.gstatic.com/onebox/media/sports/logos/y_eM68BZHYr3j3R6PxR1hg_48x48.png",
"GKS Bełchatów": "https://ssl.gstatic.com/onebox/media/sports/logos/B5Yo8s8Vhz2qc0aQHbsSrw_48x48.png",
"GKS Wikielec": "https://ssl.gstatic.com/onebox/media/sports/logos/2J9zLN_Gw5Qqf1R3F5cncw_48x48.png",
"Mławianka Mława": "https://ssl.gstatic.com/onebox/media/sports/logos/7UGM6Q75lWDbCzjhJlTlHQ_48x48.png",
"KS Wasilków": "https://ssl.gstatic.com/onebox/media/sports/logos/55kLdUCG_SV33BQoPka-dA_48x48.png",
"Znicz Biała Piska": "https://ssl.gstatic.com/onebox/media/sports/logos/1B9_iR8C1xM_yp7UMJv7Dw_48x48.png",
"Polonia Środa Wlkp.": "https://tmssl.akamaized.net/images/wappen/head/9447.png",
"Zawisza Bydgoszcz": "https://tmssl.akamaized.net/images/wappen/head/543.png",
"Wikęd Luzino": "https://tmssl.akamaized.net/images/wappen/head/30997.png",
"Elana Toruń": "https://tmssl.akamaized.net/images/wappen/head/6103.png",
"Lech Poznań II": "https://ssl.gstatic.com/onebox/media/sports/logos/llb7BEhclH9k0ioe8rTU_Q_48x48.png",
"Cartusia Kartuzy": "https://tmssl.akamaized.net/images/wappen/head/27361.png",
"Lipno Steszew": "https://tmssl.akamaized.net/images/wappen/head/30998.png",
"Flota Świnoujście": "https://tmssl.akamaized.net/images/wappen/head/8763.png",
"Błękitni Stargard": "https://tmssl.akamaized.net/images/wappen/head/31001.png",
"Wda Świecie": "https://tmssl.akamaized.net/images/wappen/head/8768.png",
"Noteć Czarnków": "https://tmssl.akamaized.net/images/wappen/head/8766.png",
"Kluczevia Stargard": "https://tmssl.akamaized.net/images/wappen/head/31002.png",
"Pogoń Szczecin II": "https://ssl.gstatic.com/onebox/media/sports/logos/WUDgte53yMralab_toMeRA_48x48.png",
"Pogoń Nowe Skalmierzyce": "https://tmssl.akamaized.net/images/wappen/head/26924.png",
"Unia Swarzędz": "https://tmssl.akamaized.net/images/wappen/head/30999.png",
"Victoria Września": "https://tmssl.akamaized.net/images/wappen/head/31000.png",
"Tluchowo": "https://tmssl.akamaized.net/images/wappen/head/31003.png",
"Wybrzeże Rewalskie": "https://tmssl.akamaized.net/images/wappen/head/31004.png"
};

// === ZMIENNE ===
let isAdmin = false;
let currentDocId = null;
let currentSection = null;
const articleSections = ['news','results','analysis','media','history','schedule'];
const matchSections = [
'ekstraklasa','pierwsza_liga','druga_liga',
'trzecia_liga_gr1','trzecia_liga_gr2','trzecia_liga_gr3','trzecia_liga_gr4',
'superpuchar','puchar_polski',
'champions_league','europa_league','conference_league'
];
const tableSections = matchSections.map(s => s + '_table');

// === FUNKCJE HERBÓW ===
function updateHomeTeamLogo() {
const teamName = document.getElementById('modalHomeTeam').value.trim();
const logoInput = document.getElementById('modalLogoHome');
if (teamLogoMap[teamName]) {
logoInput.value = teamLogoMap[teamName].trim();
} else {
logoInput.value = '';
}
}
function updateAwayTeamLogo() {
const teamName = document.getElementById('modalAwayTeam').value.trim();
const logoInput = document.getElementById('modalLogoAway');
if (teamLogoMap[teamName]) {
logoInput.value = teamLogoMap[teamName].trim();
} else {
logoInput.value = '';
}
}
function updateTableTeamLogo() {
const teamName = document.getElementById('modalTeamName').value.trim();
const logoInput = document.getElementById('modalTeamLogo');
if (teamLogoMap[teamName]) {
logoInput.value = teamLogoMap[teamName].trim();
} else {
logoInput.value = '';
}
}

// === LOGIKA STRONY ===
function showSection(id) {
document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
document.querySelectorAll('.top-nav a').forEach(a => a.classList.remove('active'));
document.getElementById(id).classList.add('active');
document.querySelector(`.top-nav a[data-section="${id}"]`).classList.add('active');
if (id !== 'home') {
if (id === 'polskie') showLiga('polskie', 'ekstraklasa');
else if (id === 'puchary') showLiga('puchary', 'superpuchar');
else {
loadSection(id);
if (tableSections.includes(id)) loadSection(id.replace('_table', ''));
}
}
}
function showLiga(context, ligaId) {
const container = document.getElementById(context);
if (!container) return;
container.querySelectorAll('.liga-subpage').forEach(el => el.classList.remove('active-liga'));
const target = document.getElementById(ligaId + '-content');
if (target) target.classList.add('active-liga');
loadSection(ligaId);
loadSection(ligaId + '_table');
}

// === LOGIKA ADMINA ===
auth.onAuthStateChanged(user => {
isAdmin = user && user.email === "admin@sgstrefagola.pl";
document.getElementById('loginForm').classList.toggle('hidden', isAdmin);
document.getElementById('adminTools').classList.toggle('hidden', !isAdmin);
if (isAdmin) {
const allSections = [...articleSections, ...matchSections, ...tableSections];
allSections.forEach(loadSection);
}
});
function loginAdmin() {
const pass = document.getElementById('adminPass').value;
auth.signInWithEmailAndPassword("admin@sgstrefagola.pl", pass)
.catch(() => document.getElementById('loginErr').textContent = "Błędne hasło");
}
function logoutAdmin() {
auth.signOut();
}

// === MODAL STANDARDOWY ===
function openAddForm(section) {
if (!isAdmin) return;
// ... (ta sama logika co w Twoim oryginalnym pliku — można zostawić bez zmian)
resetModal();
document.getElementById('modalSection').value = section;
if (articleSections.includes(section)) {
document.getElementById('articleFields').style.display = 'block';
document.getElementById('matchFields').style.display = 'none';
document.getElementById('tableFields').style.display = 'none';
document.getElementById('modalSaveBtn').textContent = 'Zapisz artykuł';
document.getElementById('modalTitle').textContent = 'Dodaj artykuł';
} else if (matchSections.includes(section)) {
document.getElementById('articleFields').style.display = 'none';
document.getElementById('matchFields').style.display = 'block';
document.getElementById('tableFields').style.display = 'none';
document.getElementById('modalSaveBtn').textContent = 'Zapisz mecz';
document.getElementById('modalTitle').textContent = 'Dodaj mecz';
} else if (tableSections.includes(section)) {
document.getElementById('articleFields').style.display = 'none';
document.getElementById('matchFields').style.display = 'none';
document.getElementById('tableFields').style.display = 'block';
document.getElementById('modalSaveBtn').textContent = 'Zapisz drużynę';
document.getElementById('modalTitle').textContent = 'Dodaj drużynę do tabeli';
}
document.getElementById('modalDelBtn').style.display = 'none';
document.getElementById('modal').classList.remove('hidden');
}
function openAddMatchOrTable(type) {
if (!isAdmin) return;
resetModal();
const select = document.getElementById('modalSection');
const allowedSections = type === 'match' ? matchSections : tableSections;
Array.from(select.options).forEach(opt => {
opt.style.display = allowedSections.includes(opt.value) ? 'block' : 'none';
});
select.value = allowedSections[0];
document.getElementById('articleFields').style.display = 'none';
document.getElementById('matchFields').style.display = type === 'match' ? 'block' : 'none';
document.getElementById('tableFields').style.display = type === 'table' ? 'block' : 'none';
document.getElementById('modalDelBtn').style.display = 'none';
document.getElementById('modalSaveBtn').textContent = type === 'match' ? 'Dodaj mecz' : 'Dodaj drużynę';
document.getElementById('modalTitle').textContent = type === 'match' ? 'Dodaj mecz' : 'Dodaj drużynę do tabeli';
document.getElementById('modal').classList.remove('hidden');
}
function openEditForm(section, docId, data) {
if (!isAdmin) return;
currentDocId = docId;
currentSection = section;
resetModal();
document.getElementById('modalSection').value = section;
if (articleSections.includes(section)) {
document.getElementById('modalTitleInput').value = data.title || '';
document.getElementById('modalContent').value = data.content || '';
document.getElementById('modalImage').value = data.imageUrl || '';
document.getElementById('modalVideo').value = data.videoUrl || '';
document.getElementById('articleFields').style.display = 'block';
document.getElementById('matchFields').style.display = 'none';
document.getElementById('tableFields').style.display = 'none';
document.getElementById('modalSaveBtn').textContent = 'Zapisz artykuł';
} else if (matchSections.includes(section)) {
document.getElementById('modalTitleInputMatch').value = data.title || '';
document.getElementById('modalHomeTeam').value = data.homeTeam || '';
document.getElementById('modalAwayTeam').value = data.awayTeam || '';
document.getElementById('modalDate').value = data.date || '';
document.getElementById('modalScore').value = data.score || '';
document.getElementById('modalLogoHome').value = data.logoHome || '';
document.getElementById('modalLogoAway').value = data.logoAway || '';
document.getElementById('articleFields').style.display = 'none';
document.getElementById('matchFields').style.display = 'block';
document.getElementById('tableFields').style.display = 'none';
document.getElementById('modalSaveBtn').textContent = 'Zapisz mecz';
} else if (tableSections.includes(section)) {
document.getElementById('modalPosition').value = data.position || '';
document.getElementById('modalTeamName').value = data.teamName || '';
document.getElementById('modalTeamLogo').value = data.teamLogo || '';
document.getElementById('modalMatches').value = data.matches || '';
document.getElementById('modalPoints').value = data.points || '';
document.getElementById('articleFields').style.display = 'none';
document.getElementById('matchFields').style.display = 'none';
document.getElementById('tableFields').style.display = 'block';
document.getElementById('modalSaveBtn').textContent = 'Zapisz drużynę';
}
document.getElementById('modalDelBtn').style.display = 'inline-block';
document.getElementById('modal').classList.remove('hidden');
}
function resetModal() {
document.getElementById('modalErr').textContent = '';
}
function closeModal() {
document.getElementById('modal').classList.add('hidden');
}
function handleSave() {
const section = document.getElementById('modalSection').value;
if (articleSections.includes(section)) {
saveArticle();
} else if (matchSections.includes(section)) {
saveMatch();
} else if (tableSections.includes(section)) {
saveTableEntry();
}
}

// === ZAPISY ===
async function saveArticle() {
const title = document.getElementById('modalTitleInput').value.trim();
const content = document.getElementById('modalContent').value;
const imageUrl = document.getElementById('modalImage').value.trim();
const videoUrl = document.getElementById('modalVideo').value.trim();
const err = document.getElementById('modalErr');
if (!title || !content) {
err.textContent = "Tytuł i treść są wymagane.";
return;
}
const section = document.getElementById('modalSection').value;
const data = { title, content, imageUrl: imageUrl || null, videoUrl: videoUrl || null };
try {
if (currentDocId) {
await db.collection(section).doc(currentDocId).update(data);
} else {
await db.collection(section).add({ ...data, createdAt: firebase.firestore.FieldValue.serverTimestamp() });
}
closeModal();
loadSection(section);
} catch (e) {
err.textContent = "Błąd zapisu.";
}
}
async function saveMatch() {
const title = document.getElementById('modalTitleInputMatch').value.trim();
const homeTeam = document.getElementById('modalHomeTeam').value.trim();
const awayTeam = document.getElementById('modalAwayTeam').value.trim();
const date = document.getElementById('modalDate').value.trim();
const score = document.getElementById('modalScore').value.trim();
const logoHome = document.getElementById('modalLogoHome').value.trim();
const logoAway = document.getElementById('modalLogoAway').value.trim();
const err = document.getElementById('modalErr');
if (!title || !homeTeam || !awayTeam || !date || !score) {
err.textContent = "Wypełnij wszystkie pola meczu.";
return;
}
const section = document.getElementById('modalSection').value;
const data = {
title, homeTeam, awayTeam, date, score,
logoHome: logoHome || null,
logoAway: logoAway || null
};
try {
if (currentDocId) {
await db.collection(section).doc(currentDocId).update(data);
} else {
await db.collection(section).add({ ...data, createdAt: firebase.firestore.FieldValue.serverTimestamp() });
}
closeModal();
loadSection(section);
const activePageId = document.querySelector('.page.active')?.id;
if (['polskie','puchary'].includes(activePageId)) {
showLiga(activePageId, section);
}
} catch (e) {
err.textContent = "Błąd zapisu meczu.";
}
}
async function saveTableEntry() {
const position = document.getElementById('modalPosition').value.trim();
const teamName = document.getElementById('modalTeamName').value.trim();
const teamLogo = document.getElementById('modalTeamLogo').value.trim();
const matches = document.getElementById('modalMatches').value.trim();
const points = document.getElementById('modalPoints').value.trim();
const err = document.getElementById('modalErr');
if (!position || !teamName || !matches || points === '') {
err.textContent = "Wypełnij wszystkie pola.";
return;
}
const section = document.getElementById('modalSection').value;
const data = {
position: parseInt(position),
teamName,
teamLogo: teamLogo || null,
matches,
points: parseInt(points)
};
try {
if (currentDocId) {
await db.collection(section).doc(currentDocId).update(data);
} else {
await db.collection(section).add({ ...data, createdAt: firebase.firestore.FieldValue.serverTimestamp() });
}
closeModal();
loadSection(section);
} catch (e) {
err.textContent = "Błąd zapisu drużyny.";
}
}
async function deleteContent() {
if (!confirm("Na pewno chcesz usunąć?")) return;
try {
const section = document.getElementById('modalSection').value;
await db.collection(section).doc(currentDocId).delete();
closeModal();
loadSection(section);
const activePageId = document.querySelector('.page.active')?.id;
if (section.endsWith('_table')) {
const base = section.replace('_table', '');
loadSection(base);
}
if (['polskie','puchary'].includes(activePageId) && matchSections.includes(section)) {
showLiga(activePageId, section);
}
} catch (e) {
document.getElementById('modalErr').textContent = "Błąd usuwania.";
}
}

// === ŁADOWANIE SEKCJI ===
async function loadSection(section) {
if (articleSections.includes(section)) {
const container = document.getElementById(section + '-list');
if (!container) return;
try {
const snap = await db.collection(section).orderBy("createdAt", "desc").get();
if (snap.empty) {
container.innerHTML = "<p>Brak treści.</p>";
return;
}
let html = '';
snap.forEach(doc => {
const d = doc.data();
const editBtn = isAdmin ?
`<button class="edit-btn" onclick="openEditForm('${section}', '${doc.id}', ${JSON.stringify(d).replace(/"/g, '&quot;')})">Edytuj</button>` : '';
const delBtn = isAdmin ?
`<button class="delete-btn" onclick="openEditForm('${section}', '${doc.id}', ${JSON.stringify(d).replace(/"/g, '&quot;')})">Usuń</button>` : '';
let media = '';
if (d.imageUrl) media += `<img src="${d.imageUrl}" alt="Zdjęcie">`;
if (d.videoUrl) media += embedVideo(d.videoUrl);
html += `
<div class="content-item">
${editBtn}${delBtn}
<h3>${d.title}</h3>
<div class="article-content">${d.content}</div>
${media}
</div>
`;
});
container.innerHTML = html;
} catch (e) {
container.innerHTML = "<p>Błąd ładowania treści.</p>";
}
} else if (matchSections.includes(section)) {
const container = document.getElementById(section + '-list');
if (!container) return;
try {
const snap = await db.collection(section).orderBy("createdAt", "desc").get();
if (snap.empty) {
container.innerHTML = "<p>Brak meczów.</p>";
return;
}
let html = '';
let currentRound = '';
snap.forEach(doc => {
const d = doc.data();
const round = d.title || 'Bez kolejki';
if (round !== currentRound) {
html += `<div class="match-header">${round}</div>`;
currentRound = round;
}
const actions = isAdmin ?
`<button class="edit-btn" style="position:absolute;top:10px;right:10px;" onclick="openEditForm('${section}', '${doc.id}', ${JSON.stringify(d).replace(/"/g, '&quot;')})">Edytuj</button>
<button class="delete-btn" style="position:absolute;top:10px;right:70px;" onclick="openEditForm('${section}', '${doc.id}', ${JSON.stringify(d).replace(/"/g, '&quot;')})">Usuń</button>` : '';
html += `
<div class="match-row">
<div class="match-date">${d.date || '-'}</div>
<div class="team-name">
${d.logoHome ? `<img class="team-logo" src="${d.logoHome.trim()}" onerror="this.style.display='none'">` : ''}
<span>${d.homeTeam || '---'}</span>
</div>
<div class="score">${d.score || '-'}</div>
<div class="team-name">
<span>${d.awayTeam || '---'}</span>
${d.logoAway ? `<img class="team-logo" src="${d.logoAway.trim()}" onerror="this.style.display='none'">` : ''}
</div>
${actions}
</div>
`;
});
container.innerHTML = html;
} catch (e) {
container.innerHTML = "<p>Błąd ładowania meczów.</p>";
}
} else if (tableSections.includes(section)) {
const container = document.getElementById(section + '-list');
if (!container) return;
try {
const snap = await db.collection(section).orderBy("position", "asc").get();
if (snap.empty) {
container.querySelector('tbody').innerHTML = `<tr><td colspan="4">Brak drużyn.</td></tr>`;
return;
}
let html = '';
snap.forEach(doc => {
const d = doc.data();
let rowClass = '';
const pos = parseInt(d.position);
if (section === 'ekstraklasa_table') {
if (pos >= 16) rowClass = 'relegation';
} else if (section === 'pierwsza_liga_table' || section === 'druga_liga_table') {
if (pos <= 2) rowClass = 'promotion';
else if (pos >= 3 && pos <= 6) rowClass = 'playoff';
else if (pos >= 16) rowClass = 'relegation';
} else if (section.startsWith('trzecia_liga')) {
if (pos === 1) rowClass = 'promotion';
else if (pos === 2) rowClass = 'playoff';
else if (pos >= 15) rowClass = 'relegation';
}
const actions = isAdmin ?
`<td>
<button class="edit-btn" onclick="openEditForm('${section}', '${doc.id}', ${JSON.stringify(d).replace(/"/g, '&quot;')})">Edytuj</button>
<button class="delete-btn" onclick="openEditForm('${section}', '${doc.id}', ${JSON.stringify(d).replace(/"/g, '&quot;')})">Usuń</button>
</td>` : '';
html += `
<tr class="${rowClass}">
<td>${d.position || '-'}</td>
<td class="team-cell">
${d.teamLogo ? `<img class="team-logo-small" src="${d.teamLogo.trim()}" onerror="this.style.display='none'">` : ''}
<span>${d.teamName || '---'}</span>
</td>
<td>${d.matches || '-'}</td>
<td>${d.points || '-'}</td>
${actions}
</tr>
`;
});
container.querySelector('tbody').innerHTML = html;
let legendHTML = '';
if (section === 'ekstraklasa_table') {
legendHTML = '<div class="legend"><span class="relegation"></span> Spadek do 1. ligi (16–18)</div>';
} else if (section === 'pierwsza_liga_table') {
legendHTML = `
<div class="legend">
<span class="promotion"></span> Awans do ekstraklasy (1–2)
<span class="playoff"></span> Play-off o awans: Półfinał (3–6)
<span class="relegation"></span> Spadek do 2. ligi (16–18)
</div>
`;
} else if (section === 'druga_liga_table') {
legendHTML = `
<div class="legend">
<span class="promotion"></span> Awans do 1. ligi (1–2)
<span class="playoff"></span> Play-off o awans: Półfinał (3–6)
<span class="relegation"></span> Spadek do 3. ligi (16–18)
</div>
`;
} else if (section.startsWith('trzecia_liga')) {
legendHTML = `
<div class="legend">
<span class="promotion"></span> Awans do 2. ligi (1)
<span class="playoff"></span> Betclic 2. Liga – Play-off o awans (2)
<span class="relegation"></span> Spadek do 4. ligi (15–18)
</div>
`;
}
const existingLegend = container.nextElementSibling;
if (existingLegend && existingLegend.classList.contains('legend')) {
existingLegend.remove();
}
if (legendHTML) {
container.insertAdjacentHTML('afterend', legendHTML);
}
} catch (e) {
container.querySelector('tbody').innerHTML = `<tr><td colspan="4">Błąd ładowania tabeli.</td></tr>`;
}
}
}

// === BATCH FUNKCJE ===
function parseMatchLine(line) {
const regex = /^(\d{2}\.\d{2}\.\d{4}),\s*(\d{2}:\d{2})\s+(.+?)\s+(\d+)-(\d+)\s+(.+)$/;
const match = line.trim().match(regex);
if (!match) return null;
const [, date, time, homeTeam, homeScore, awayScore, awayTeam] = match;
return {
date: `${date}, ${time}`,
homeTeam: homeTeam.trim(),
awayTeam: awayTeam.trim(),
score: `${homeScore}:${awayScore}`
};
}
async function saveBatchMatches() {
const section = document.getElementById('batchSection').value;
const round = document.getElementById('batchRound').value.trim() || "Kolejka";
const text = document.getElementById('batchMatches').value;
const lines = text.split('\n').filter(l => l.trim());
let successCount = 0;

for (const line of lines) {
const parsed = parseMatchLine(line);
if (!parsed) continue;
const data = {
title: round,
homeTeam: parsed.homeTeam,
awayTeam: parsed.awayTeam,
date: parsed.date,
score: parsed.score,
logoHome: teamLogoMap[parsed.homeTeam] || null,
logoAway: teamLogoMap[parsed.awayTeam] || null
};
try {
await db.collection(section).add({ ...data, createdAt: firebase.firestore.FieldValue.serverTimestamp() });
successCount++;
} catch (e) {
console.error("Błąd zapisu meczu:", line, e);
}
}
closeModalBatch();
loadSection(section);
alert(`✅ Dodano ${successCount} meczów.`);
}
function openBatchModal() {
if (!isAdmin) return;
document.getElementById('batchErr').textContent = '';
document.getElementById('batchMatches').value = '';
document.getElementById('batchRound').value = '';
document.getElementById('modalBatch').classList.remove('hidden');
}
function closeModalBatch() {
document.getElementById('modalBatch').classList.add('hidden');
}

// === POMOCNICZE ===
function embedVideo(url) {
if (!url) return '';
const yt = url.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/);
if (yt) return `<iframe src="https://www.youtube.com/embed/${yt[1]}" frameborder="0" allowfullscreen></iframe>`;
if (url.endsWith('.mp4') || url.endsWith('.webm')) return `<video controls style="width:100%"><source src="${url}" type="video/mp4"></video>`;
return `<a href="${url}" target="_blank" style="display:inline-block;padding:6px 12px;background:#ff3b3b;color:white;border-radius:4px;text-decoration:none;">Otwórz film</a>`;
}

// === INICJALIZACJA ===
document.querySelectorAll('.top-nav a').forEach(link => {
link.addEventListener('click', (e) => {
e.preventDefault();
showSection(link.getAttribute('data-section'));
});
});
document.addEventListener('DOMContentLoaded', () => {
['modalHomeTeam','modalAwayTeam','modalTeamName'].forEach(id => {
const el = document.getElementById(id);
if (el) el.addEventListener('input', () => {
if (id === 'modalHomeTeam') updateHomeTeamLogo();
else if (id === 'modalAwayTeam') updateAwayTeamLogo();
else updateTableTeamLogo();
});
});
});
showSection('home');
</script>
</body>
</html>